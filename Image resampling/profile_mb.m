function OUTIMG=profile_mb(INPIMG,Lint,N)% Generating and plotting a profile of an image along a straight line% defined interactively by the user% Input image is Lint-fold sinc-interpolated% N -is the number of samples along the profile% Call OUTIMG=profile(INPIMG,Lint,N);INPIMG = double(INPIMG);clfif Lint==1, INPIMG_i=INPIMG; display1(INPIMG_i),elseINPIMG_i=interp2d_mb(INPIMG,Lint,Lint);end[SzX SzY]=size(INPIMG);s='y';while s=='y',clfcolormap(gray(256));display1_mb(INPIMG_i);axis on;axis equaltitle('Select first point of the line');[y1 x1]=ginput(1); y1=round(y1); x1=round(x1);title('Select second point of line line');[y2 x2]=ginput(1);y2=round(y2); x2=round(x2);K=0:N-1;dl=(x2-x1)/(N-1);X=x1+dl*K;Y=round((y2-y1)*(X-x1)/(x2-x1)+y1);OUTIMG=INPIMG_i(round(X)+Lint*SzX*(Y-1));INPIMG_i(round(X)+Lint*SzX*(Y-1))=255*ones(size(OUTIMG));subplot(211);display1_mb(INPIMG_i);title('profile.m: Input image')INPIMG_i(round(X)+Lint*SzX*(Y-1))=OUTIMG;plotnorm_mb(OUTIMG,2,1,2);title(['Profile;x1=',num2str(x1),';y1=',num2str(y1),';x2=',num2str(x2),';y2=',num2str(y2),';Lint=',num2str(Lint)]);drawnows=input('Do you want to continue? (y or n)  ','s'); end